consul:
  image: gliderlabs/consul-server
  ports:
  - "8400:8400"
  - "8500:8500"
  - "8600:53/udp"
  net: "host"
  command: -bootstrap
  mem_limit: 128m
  environment:
  - SERVICE_NAME=consul

registrator:
  image: gliderlabs/registrator:latest
  net: "host"
  volumes:
  - /var/run/docker.sock:/tmp/docker.sock
  net: "host"
  command: consul://localhost:8500
  mem_limit: 128m
  environment:
  - SERVICE_NAME=registrator

vault:
  image: voxxit/vault
  ports:
  - "8200:8200"
  memswap_limit: -1
  mem_limit: 0
  environment:
  - SERVICE_NAME=vault

ldap:
  build: ldap
  ports:
  - "389:389"
  - "636:636"
  volumes:
   - ./ldap/jgrowl.configure_ldap:/etc/ansible/roles/jgrowl.configure_ldap
  mem_limit: 256m
  environment:
  - SERVICE_NAME=ldap
  env_file: env


#ldap_data:
#  image: busybox
#  volumes:
#  - /etc/ldap/slapd.d
#  - /var/lib/ldap
#  mem_limit: 128m
#
#ldap:
#  image: osixia/openldap
#  volumes_from:
#  - ldap_data
#  ports:
#  - "389:389"
#  - "636:636"
#  mem_limit: 256m
#  env_file: env

synapse:
  build: matrix
  ports:
   - "8448:8448"
  volumes:
   - ./matrix/jgrowl.configure_synapse:/etc/ansible/roles/jgrowl.configure_synapse
#  links:
#   - redis
  environment:
  - SERVICE_NAME=synapse
  env_file: env

#db:
#  image: mariadb
#  ports:
#  - "3306:3306"
#  environment:
#  - MYSQL_ROOT_PASSWORD=my-secret-pw

#ovpn_data:
#  image: busybox
#  volumes:
#  - /etc/openvpn
#
#ovpn:
#  image: kylemanna/openvpn
#  volumes_from:
#  -  ovpn_data
#  ports:
#  - "1194:1194/udp"
#  cap_add:
#  - NET_ADMIN
#
#mail_data:
#  image: busybox
#  volumes:
#  - /var/mail
#  - /etc/mail
#  mem_limit: 128m
#
#mail:
#  image: jgrowl/mail
#  command: supervisord -n -c /etc/supervisor/supervisord.conf
#  volumes_from:
#  - mail_data
#  ports:
#  - "25:25"
#  - "587:587"
#  - "110:110"
#  - "143:143"
#  - "80:80"
#  mem_limit: 1024m
#  env_file: .env

